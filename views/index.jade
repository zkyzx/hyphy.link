extends layout

block content
  div(class="four column centered row")
    div(class="column")
      div(id="status-msg").
        ""
  div(class="ui one column center aligned grid spaced")
    div(class="column eight wide")
      div(id="urlIntake", class="ui massive input", style="width: 100%;")
        input(type="text", id="mput" placeholder="Paste, shorten and share")
        button(id="intakeBtn", class="ui button").
          Shorten
      div(id='linkDisplay')
      div(id='copy-btn-contain')
        button(data-clipboard-target="#linkDisplay" class="btn ui violet button" id="copy-btn").
          Copy

  script.
      var clipboard = new Clipboard('.btn');
      clipboard.on('success',function(e){
        statusMessageBanner = $('div#status-msg');
        statusMessageBanner.css("background", "green");
        statusMessageBanner.html(e.text + " copied to clipboard.")
          .slideDown('slow')
          .delay(2000)
          .slideUp('fast');
      });

      clipboard.on('error', function(e){
        console.log(e);
      });

      var socket = io.connect();
      $('#intakeBtn').click(function(){
         socket.emit('link submit', $('#mput').val());
         $('#mput').val('');
         return false;
      });

      socket.on('link ready', function(hlink){
        $('div#linkDisplay').hide().html(hlink).fadeIn('slow');
        $('#copy-btn').fadeIn("slow");
      })

      socket.on('link error', function(msg){
        statusMessageBanner = $('div#status-msg');
        statusMessageBanner.css("background", "yellow");
        statusMessageBanner.html(msg).slideDown('slow').delay(2000).slideUp('fast');
      });

